var App = {
    Collections: {},
    Views: {},
	states: {
	  'AL': 'Alabama',
	  'AK': 'Alaska',
	  'AZ': 'Arizona',
	  'AR': 'Arkansas',
	  'CA': 'California',
	  'CO': 'Colorado',
	  'CT': 'Connecticut',
	  'DE': 'Delaware',
	  'DC': 'District of Columbia',
	  'FL': 'Florida',
	  'GA': 'Georgia',
	  'HI': 'Hawaii',
	  'ID': 'Idaho',
	  'IL': 'Illinois',
	  'IN': 'Indiana',
	  'IA': 'Iowa',
	  'KS': 'Kansas',
	  'KY': 'Kentucky',
	  'LA': 'Louisiana',
	  'ME': 'Maine',
	  'MD': 'Maryland',
	  'MA': 'Massachusetts',
	  'MI': 'Michigan',
	  'MN': 'Minnesota',
	  'MS': 'Mississippi',
	  'MO': 'Missouri',
	  'MT': 'Montana',
	  'NE': 'Nebraska',
	  'NV': 'Nevada',
	  'NH': 'New Hampshire',
	  'NJ': 'New Jersey',
	  'NM': 'New Mexico',
	  'NY': 'New York',
	  'NC': 'North Carolina',
	  'ND': 'North Dakota',
	  'OH': 'Ohio',
	  'OK': 'Oklahoma',
	  'OR': 'Oregon',
	  'PA': 'Pennsylvania',
	  'RI': 'Rhode Island',
	  'SC': 'South Carolina',
	  'SD': 'South Dakota',
	  'TN': 'Tennessee',
	  'TX': 'Texas',
	  'UT': 'Utah',
	  'VT': 'Vermont',
	  'VA': 'Virginia',
	  'WA': 'Washington',
	  'WV': 'West Virginia',
	  'WI': 'Wisconsin',
	  'WY': 'Wyoming'
	},	
    init: function() {
	//load the requested view
	if (this.viewparams) params = this.viewparams;
	if (this.views && _.size(this.views)>0) {
		_.each(this.views, function(params,view) {
			if (App.Views[view]) {
				var view = App.Views[view];
				new view(params);
			}
		});
	};
		
	//have the navbar auto-re-adjust
	navb_dims = {"w": $(".navbar-inner").width(), "t": $(".navbar-inner").offset()["top"], "h": $("navbar-inner").height()}
	$(window).scroll(function() {
		if ($(window).scrollTop() > navb_dims["t"]) {
			$(".navbar-inner").css("position", "fixed").css("top", "0px").css("width", navb_dims["w"]);
		} else if ($(window).scrollTop() < (navb_dims["t"] + navb_dims["h"])) {
			$(".navbar-inner").css("position", "relative");
		}
	});
    },
	//adding commas to a number to format it
	addCommas: function(nStr)
	{
		nStr += '';
		x = nStr.split('.');
		x1 = x[0];
		x2 = x.length > 1 ? '.' + x[1] : '';
		var rgx = /(\d+)(\d{3})/;
		while (rgx.test(x1)) {
			x1 = x1.replace(rgx, '$1' + ',' + '$2');
		}
		return x1 + x2;
	}
};
